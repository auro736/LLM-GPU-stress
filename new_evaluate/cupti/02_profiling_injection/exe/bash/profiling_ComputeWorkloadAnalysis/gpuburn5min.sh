export INJECTION_KERNEL_COUNT=$1

export INJECTION_METRICS="sm__inst_executed.avg.per_cycle_elapsed "
export INJECTION_METRICS=$INJECTION_METRICS"sm__instruction_throughput.avg.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed.avg.per_cycle_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_issued.avg.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_issued.avg.per_cycle_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_issued.max.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_alu_cycles_active.avg.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_fma_cycles_active.avg.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_fp64_cycles_active.avg.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_tensor_cycles_active.avg.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_tensor_op_dmma_cycles_active.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_tensor_op_hmma_cycles_active.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_tensor_op_imma_cycles_active.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_shared_cycles_active.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__pipe_tma_cycles_active.avg.pct_of_peak_sustained_active "
export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_adu.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_alu.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_cbu.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_fma.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_fp16.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_fma_type_fp16.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_fp64_op_dmma.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_fp64_op_fp64.avg.pct_of_peak_sustained_active " 
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_fp64.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_lsu.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_tensor_op_dmma.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_tensor_op_gmma.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_tensor_op_hmma.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_uniform.avg.pct_of_peak_sustained_active "
# export INJECTION_METRICS=$INJECTION_METRICS"sm__inst_executed_pipe_xu.avg.pct_of_peak_sustained_active "

env CUDA_INJECTION64_PATH=./libinjection.so ./test-apps/gpu-burn/gpu_burn -i 0 -c ./test-apps/gpu-burn/compare.ptx -m 50% > data/raw/ComputeWorkloadAnalysis/gpuburn5min_$INJECTION_KERNEL_COUNT.txt 300